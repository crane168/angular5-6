{"version":3,"file":"highlightjs.umd.min.js","sources":["../../__gen_lib/components/highlight-js.directive.ts","../../__gen_lib/ngx-highlight-js.module.ts"],"sourcesContent":["import {\n  Directive,\n  ElementRef,\n  Input,\n  OnInit,\n  OnDestroy,\n  ContentChild,\n  AfterViewInit,\n  Inject,\n} from '@angular/core';\nimport { DOCUMENT } from '@angular/common';\nimport { NgModel } from '@angular/forms';\n\ndeclare const hljs: any;\n\n@Directive({\n  selector: '[highlight-js]',\n  host: {\n    style: 'display:none;',\n  },\n})\nexport class HighlightJsDirective implements OnInit, AfterViewInit, OnDestroy {\n  @Input() options: any;\n  @Input() lang: string;\n  @Input() code: string;\n  @ContentChild(NgModel) private readonly ngModel: NgModel;\n\n  protected codeEl: any;\n  protected parentEl: any;\n\n  private escapeHTML(str: string): string {\n    return (str || '')\n      .replace(/&/g, '&amp;')\n      .replace(/</g, '&lt;')\n      .replace(/>/g, '&gt;')\n      .replace(/\"/g, '&quot;')\n      .replace(/'/g, '&apos;');\n  }\n\n  private init() {\n    this.destroy();\n    this.codeEl = this.doc.createElement('pre');\n    if (this.lang) {\n      this.codeEl.className = this.lang;\n    }\n    this.codeEl.innerHTML =\n      this.code || '' + this.el.nativeElement.innerHTML.trim();\n    this.parentEl = this.el.nativeElement.parentNode;\n    this.parentEl.insertBefore(this.codeEl, this.el.nativeElement.nextSibling);\n\n    hljs.configure(Object.assign({}, this.options));\n    hljs.highlightBlock(this.codeEl);\n  }\n\n  private destroy() {\n    if (this.codeEl) {\n      this.parentEl.removeChild(this.codeEl);\n      this.codeEl = null;\n    }\n  }\n\n  constructor(\n    private el: ElementRef,\n    @Inject(DOCUMENT) private doc: any,\n  ) {}\n\n  ngOnInit() {\n    this.init();\n  }\n\n  ngAfterViewInit(): void {\n    if (this.ngModel) {\n      this.ngModel.valueChanges.subscribe(res => {\n        this.code = this.escapeHTML(res);\n        this.init();\n      });\n    }\n  }\n\n  ngOnDestroy(): void {\n    this.destroy();\n  }\n}\n","import { NgModule } from '@angular/core';\nimport { FormsModule } from '@angular/forms';\nimport { HighlightJsDirective } from './components/highlight-js.directive';\n\n@NgModule({\n  imports: [FormsModule],\n  declarations: [HighlightJsDirective],\n  exports: [HighlightJsDirective]\n})\nexport class HighlightJsModule {\n}\n"],"names":["el","doc","this","HighlightJsDirective","str","replace","destroy","codeEl","createElement","lang","className","innerHTML","code","nativeElement","trim","parentEl","parentNode","insertBefore","nextSibling","hljs","configure","Object","assign","options","highlightBlock","removeChild","init","ngModel","valueChanges","subscribe","res","_this","escapeHTML","Directive","selector","host","style","ElementRef","Inject","DOCUMENT","Input","ContentChild","NgModel","NgModule","imports","FormsModule","declarations","exports"],"mappings":"yWAAA,iBA6DE,WACUA,EACkBC,GADlBC,QAAAF,EACkBE,SAAAD,SAjCpBE,gCAAWC,GACjB,OAAQA,GAAO,IACZC,QAAQ,KAAM,SACdA,QAAQ,KAAM,QACdA,QAAQ,KAAM,QACdA,QAAQ,KAAM,UACdA,QAAQ,KAAM,WAGXF,4BACND,KAAKI,UACLJ,KAAKK,OAASL,KAAKD,IAAIO,cAAc,OACjCN,KAAKO,OACPP,KAAKK,OAAOG,UAAYR,KAAKO,MAE/BP,KAAKK,OAAOI,UACVT,KAAKU,MAAQ,GAAKV,KAAKF,GAAGa,cAAcF,UAAUG,OACpDZ,KAAKa,SAAWb,KAAKF,GAAGa,cAAcG,WACtCd,KAAKa,SAASE,aAAaf,KAAKK,OAAQL,KAAKF,GAAGa,cAAcK,aAE9DC,KAAKC,UAAUC,OAAOC,OAAO,GAAIpB,KAAKqB,UACtCJ,KAAKK,eAAetB,KAAKK,SAGnBJ,+BACFD,KAAKK,SACPL,KAAKa,SAASU,YAAYvB,KAAKK,QAC/BL,KAAKK,OAAS,OASlBJ,qBAAA,WACED,KAAKwB,QAGPvB,4BAAA,WAAA,WACMD,KAAKyB,SACPzB,KAAKyB,QAAQC,aAAaC,UAAU,SAAAC,GAClCC,EAAKnB,KAAOmB,EAAKC,WAAWF,GAC5BC,EAAKL,UAKXvB,wBAAA,WACED,KAAKI,+BAjER2B,kBAAU,CACTC,SAAU,iBACVC,KAAM,CACJC,MAAO,8DAhBTC,6CA6DGC,eAAOC,kDAzCTC,sBACAA,sBACAA,yBACAC,qBAAaC,yECrBfC,iBAAS,CACRC,QAAS,CAACC,eACVC,aAAc,CAAC3C,GACf4C,QAAS,CAAC5C"}